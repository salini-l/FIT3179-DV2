{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {
    "text": "Annual Temperature Anomalies by Decade in Australia",    "dy": 6
  },
  "width": 900,
  "height": 360,

  "data": {
    "url": "https://raw.githubusercontent.com/salini-l/FIT3179-DV2/refs/heads/main/box_plot/data/temp_change_country_year.csv"
  },

  "transform": [
    { "filter": "datum.Area == 'Australia'" },
    { "calculate": "floor(datum.Year/10)*10", "as": "Decade" },
    { "filter": "datum.Decade >= 1960 && datum.Decade <= 2010" }
  ],

  "layer": [
    { "mark": { "type": "rule", "stroke": "#9ca3af", "strokeDash": [4,4] },
      "encoding": { "y": { "datum": 0 } } },

    {
      "mark": { "type": "boxplot", "extent": "min-max", "median": {"color": "#111827"} },
      "encoding": {
        "x": { "field": "Decade", "type": "ordinal", "title": "Decade",
               "sort": ["1960","1970","1980","1990","2000","2010"],
               "axis": { "labelAngle": 0, "labelPadding": 8 } },
        "y": { "field": "TempChange_C", "type": "quantitative", "title": "Temperature Change (°C)" },
        "color": { "value": "#9ca3af" },           
        "tooltip": true
      }
    },

    {
      "transform": [
        { "calculate": "random()", "as": "j" }   
      ],
      "mark": { "type": "point", "filled": true, "size": 36, "opacity": 0.65 },
      "encoding": {
        "x": {
          "field": "Decade", "type": "ordinal",
          "sort": ["1960","1970","1980","1990","2000","2010"],
          "title": "Decade",
          "axis": { "labelAngle": 0, "labelPadding": 8 },
          "offset": 0,
          "bandPosition": 0.5
        },
        "xOffset": { "field": "j", "type": "quantitative", "scale": { "domain": [0,1], "range": [-12,12] } },
        "y": { "field": "TempChange_C", "type": "quantitative" },
        "color": {
          "field": "TempChange_C", "type": "quantitative",
          "title": "Temperature Change (°C)",
          "scale": {
            "type": "threshold",
            "domain": [0.5, 1.0, 1.5, 2.0],
            "range": ["#fee5d9","#fcbba1","#fb6a4a","#ef3b2c","#cb181d"]
          }
        },
        "tooltip": true
      }
    }
  ],

  "config": {
    "axis": { "grid": true },
    "view": { "stroke": null },
    "legend": { "titleFontSize": 12, "labelFontSize": 11 }
  }
}

